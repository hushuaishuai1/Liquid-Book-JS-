Liquid Book JS - 加密货币流动性做市策略
这是一个使用 Node.js 和 JavaScript (ES Modules) 实现的加密货币做市商机器人程序。它的主要目标是在指定的交易所（如币安期货）上，为特定的交易对（如 BTC/USDT）提供流动性，并通过赚取买卖价差来尝试获利。
策略核心逻辑
该机器人的做市策略基于以下基本原理：
连接交易所: 使用强大的 ccxt 库来连接和交互（支持包括币安在内的众多交易所）。
获取市场数据: 持续获取实时的市场信息，主要包括：
订单簿 (Order Book): 获取买卖盘的深度数据。
最新行情 (Ticker): 获取最新成交价等信息。
账户状态: 获取可用余额和当前持仓。
计算参考价格: 基于订单簿的深度信息，计算一个“深度加权中间价”(Depth-Weighted Mid-Price) 或类似的参考价格，以反映当前市场的公允价值。
确定目标报价:
围绕计算出的参考价格，根据配置的目标价差 (TARGET_SPREAD_PCT, MIN_SPREAD, MAX_SPREAD) 计算出目标买入价（Bid）和目标卖出价（Ask）。
库存管理 (报价倾斜):
策略会监控当前的持仓量 (POSITION_LIMIT, currentPositionSize)。
当持仓偏离目标（通常是零）时，它会倾斜报价 (INVENTORY_SKEW_INTENSITY)：
如果持有多头仓位，会稍微降低买单价格，并（可能）降低卖单价格，以鼓励卖单成交，减少买单成交。
如果持有空头仓位，则反之。
目的是主动管理库存风险，避免在单边行情中积累过多风险敞口。
数量调整 (流动性感知):
策略会检查计算出的目标买卖价格附近的订单簿流动性 (LIQUIDITY_VOLUME_THRESHOLD, RANGE_TICKS_FOR_LIQUIDITY)。
根据附近挂单量的多少，动态调整实际要下的订单数量 (BASE_AMOUNT)。在流动性差的区域，可能会下达比基础数量更小的订单。
订单管理:
根据最终计算出的价格和数量，以及风险检查（余额、最小名义价值 MIN_NOTIONAL_VALUE、持仓限制）的结果，决定是否下单。
优先尝试编辑 (Edit) 已存在的挂单到新的目标价格和数量，以节省手续费和提高效率（如果交易所支持）。
如果编辑失败（例如订单已成交或被取消 OrderNotFound）或没有可编辑的订单，则会尝试下达新的限价单 (Limit Order)。
会自动处理和取消不再需要的或无效的订单。
配置驱动: 所有的关键参数，包括 API 密钥、交易对、价差、数量、限制、倾斜强度等，都通过 .env 文件进行配置，方便调整和管理。
测试网支持: 支持连接到币安测试网 (USE_TESTNET=true)，方便在没有真实资金风险的情况下进行测试和调试。
主要特点
基于 Node.js，使用现代 JavaScript (ES Modules)。
依赖 ccxt 库，理论上可扩展支持多种交易所。
实现了核心的做市逻辑（价差、中间价）。
包含基于持仓的报价倾斜机制，用于主动库存风险管理。
包含基于订单簿流动性的订单数量调整机制。
支持订单的编辑操作（如果交易所支持），优化执行。
通过 .env 文件进行灵活配置。
包含基本的成交量跟踪（注意 API 调用频率限制）。
包含基本的错误处理和日志记录。
重要提示 / 免责声明
风险警告: 自动化交易和做市策略涉及重大风险，可能导致严重亏损。市场波动、API 延迟、程序 Bug、配置错误等都可能产生非预期的结果。
测试网优先: 在使用任何真实资金之前，务必在测试网 (Testnet) 上进行彻底和长时间的测试，确保你完全理解代码的行为和潜在风险。
自行承担风险: 本软件按“原样”提供，不附带任何明示或暗示的保证。使用此代码需要自行承担所有风险。开发者不对任何因使用此软件而造成的损失负责。
代码理解: 在运行此机器人之前，请确保你阅读并理解了代码的主要逻辑，特别是风险管理和订单执行部分。
参数调整: 策略参数（价差、数量、限制、倾斜强度等）需要根据具体市场条件和个人风险承受能力进行仔细调整和优化。默认参数不保证盈利。
